(()=>{var e={};e.id=164,e.ids=[164],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},61997:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>p,routeModule:()=>x,tree:()=>c});var r=s(73137),o=s(54647),a=s(4183),i=s.n(a),n=s(71775),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);s.d(t,l);let d=r.AppPageRouteModule,c=["",{children:["tools",{children:["compress",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,60937)),"D:\\مجلد جديد\\room\\pdf-processor\\src\\app\\tools\\compress\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,21961)),"D:\\مجلد جديد\\room\\pdf-processor\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,51918,23)),"next/dist/client/components/not-found-error"]}],p=["D:\\مجلد جديد\\room\\pdf-processor\\src\\app\\tools\\compress\\page.tsx"],u="/tools/compress/page",m={require:s,loadChunk:()=>Promise.resolve()},x=new d({definition:{kind:o.x.APP_PAGE,page:"/tools/compress/page",pathname:"/tools/compress",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},70402:(e,t,s)=>{Promise.resolve().then(s.bind(s,77380))},77380:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>CompressPDFPage});var r=s(60080),o=s(9885),a=s(11327),i=s(27870),n=s(24616);let showErrorToast=e=>{let t=document.createElement("div");t.style.cssText=`
    position: fixed;
    top: 20px;
    right: 20px;
    background: #f44336;
    color: white;
    padding: 16px 24px;
    border-radius: 4px;
    z-index: 1000;
    direction: rtl;
    opacity: 0;
    transition: opacity 0.3s ease-in-out;
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
  `,t.textContent=e,document.body.appendChild(t),setTimeout(()=>{t.style.opacity="1"},100),setTimeout(()=>{t.style.opacity="0",setTimeout(()=>document.body.removeChild(t),300)},4700)};function CompressPDFPage(){let{t:e}=(0,i.$G)(),[t,s]=(0,o.useState)(0),[l,d]=(0,o.useState)(null),[c,p]=(0,o.useState)(80),[u,m]=(0,o.useState)([]),[x,g]=(0,o.useState)(1),[h,b]=(0,o.useState)([]),handleUpload=async e=>{d(null);try{if(e.size>10485760)throw Error("حجم الملف يتجاوز الحد الأقصى (10 ميجابايت)");s(10);let t=new FormData;t.append("file",e),t.append("quality",c.toString()),s(30);let r=new AbortController,o=setTimeout(()=>r.abort(),6e4);try{console.log("Starting compression request with quality:",c);let a=await fetch("/api/compress",{method:"POST",body:t,signal:r.signal,headers:{Accept:"application/json, application/pdf"}});if(clearTimeout(o),console.log("Response received:",a.status,a.headers.get("content-type")),!a.ok){let e=await a.json();throw Error(e.error||"فشل الضغط")}s(70);let i=await a.blob();if(0===i.size)throw Error("الملف المضغوط فارغ");let n=((1-i.size/e.size)*100).toFixed(1);console.log(`Compression achieved: ${n}%`),s(90);let l=window.URL.createObjectURL(i),d=document.createElement("a");d.style.display="none",d.href=l,d.download=e.name.replace(".pdf","_compressed.pdf"),document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(l),s(100);let p=document.createElement("div");p.style.cssText=`
          position: fixed;
          top: 20px;
          right: 20px;
          background: #4caf50;
          color: white;
          padding: 16px 24px;
          border-radius: 4px;
          z-index: 1000;
          direction: rtl;
          opacity: 0;
          transition: opacity 0.3s ease-in-out;
          box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        `,p.textContent=`تم ضغط الملف بنجاح! نسبة الضغط: ${n}%`,document.body.appendChild(p),setTimeout(()=>{p.style.opacity="1"},100),setTimeout(()=>{p.style.opacity="0",setTimeout(()=>document.body.removeChild(p),300)},4700)}catch(e){if("AbortError"===e.name)throw Error("معالجة الملف استغرقت وقتاً طويلاً. الرجاء تجربة ملف أصغر.");throw e}}catch(e){console.error("Processing error:",e),s(0),d(e.message||"فشل معالجة الملف. الرجاء المحاولة مرة أخرى."),showErrorToast(e.message||"فشل معالجة الملف. الرجاء المحاولة مرة أخرى.")}},y=(0,o.useCallback)(e=>e<=30?"ضغط عالي (جودة منخفضة)":e<=60?"ضغط متوسط":"ضغط منخفض (جودة عالية)",[]);return(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[r.jsx("h1",{className:"text-3xl font-bold mb-8 dark:text-white text-right",children:"ضغط ملفات PDF"}),l&&r.jsx("div",{className:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded text-right",children:l}),r.jsx("div",{className:"mb-8",children:r.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-right",children:"اختر مستوى الضغط المطلوب واختر ملف PDF لضغطه"})}),r.jsx("div",{className:"mb-8 bg-white dark:bg-gray-800 rounded-lg p-6 shadow-md",children:(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("label",{className:"block text-gray-700 dark:text-gray-200 text-right mb-2",children:["مستوى الضغط: ",y(c)]}),r.jsx("input",{type:"range",min:"1",max:"100",value:c,onChange:e=>p(Number(e.target.value)),className:"w-full"}),(0,r.jsxs)("div",{className:"flex justify-between text-sm text-gray-500 dark:text-gray-400 mt-1",children:[r.jsx("span",{children:"ضغط عالي"}),r.jsx("span",{children:"جودة عالية"})]})]})}),(0,r.jsxs)("div",{className:"relative",children:[t>0&&t<100&&r.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center z-10 rounded-lg",children:(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg text-center",children:[(0,r.jsxs)("div",{className:"text-lg mb-3",children:["جاري ضغط الملف... ",t,"%"]}),r.jsx("div",{className:"w-64 h-2 bg-gray-200 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-300 ease-in-out",style:{width:`${t}%`}})})]})}),r.jsx(a.p,{onUpload:handleUpload,options:{type:"compress",settings:{quality:c}},onProgress:s})]}),r.jsx(n.m,{files:u,currentPage:x,filesPerPage:5,onPageChange:g,onRemove:e=>m(u.filter((t,s)=>s!==e))})]})}},60937:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>a,default:()=>l});var r=s(17536);let o=(0,r.createProxy)(String.raw`D:\مجلد جديد\room\pdf-processor\src\app\tools\compress\page.tsx`),{__esModule:a,$$typeof:i}=o,n=o.default,l=n}};var t=require("../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[650,990,189,291,616],()=>__webpack_exec__(61997));module.exports=s})();